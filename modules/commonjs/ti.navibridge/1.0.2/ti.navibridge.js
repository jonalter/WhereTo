var NAVIBRIDGE=function(){var a={};a.isIOS="iphone"===Ti.Platform.osname||"ipad"===Ti.Platform.osname?!0:!1;a.ApplicationID="tjKEEUqB";a.ver="1.4";a.URLschemeBASE="navicon://";a.installIPhone="http://itunes.apple.com/us/app/navibridge/id498898448?mt=8";a.installAndroid="http://appcappstore.s3.amazonaws.com/navibridge/NaviBridge_Appcelerator_test_v3.3f.apk";a.SetApplicationID=function(a){NAVIBRIDGE.ApplicationID=a};a.openNavi=function(){a.fireConsoleEvent("canOpenURL"+a.URLschemeBASE);Ti.Platform.canOpenURL(a.URLschemeBASE)?
(a.fireConsoleEvent("App installed, opening app:"+a.URLschemeBASE),Ti.Platform.openURL(a.URLschemeBASE)):(alert("NaviBridge must be Installed on this device!"),a.fireConsoleEvent("App not installed, calling install"),a.installNavi())};a.installNavi=function(){a.fireConsoleEvent("open install:"+a.installIPhone);Ti.Platform.openURL(a.installIPhone)};a.addPOI=function(c){var b="navicon://setPOI?ver=1.3&ll=37.38922,-122.048496&appName="+a.ApplicationID;null!=c?null!=c.lat?null!=c.lon?(b="navicon://setPOI?ver=1.3&ll="+
c.lat+","+c.lon,null!=c.title&&(b+="&title="+c.title),null!=c.tel&&(b+="&tel="+c.tel),null!=c.text&&(b+="&text="+c.text),null!=c.callURL&&(b+="&callURL="+c.callURL),b+="&appName="+a.ApplicationID,a.fireConsoleEvent("addPOI =>"+b),Ti.Platform.openURL(b)):Ti.API.info("ERROR: POI Null"):Ti.API.info("ERROR: POI Null"):Ti.API.info("ERROR: POI Null")};a.addPOIMultiple=function(){Ti.API.info("addPOIMultiple => NOT IMPLIMENTED ");Ti.Platform.openURL("navicon://setPOI?ver=1.3&ll=37.38922,-122.048496&appName=ICiAV4Ay")};
a.fireConsoleEvent=function(a){Ti.App.fireEvent("ti.navibridge.admin.console",{message:a})};a.factoryAdminView=function(){var a=Ti.UI.createView({top:0,height:600}),b=Ti.UI.createLabel({top:0,left:0,height:10,color:"black",text:"v"+Titanium.App.getVersion()+" ",font:{fontSize:6}});a.add(b);b=Ti.UI.createButton({top:5,title:"Open NaviBridge",height:40,width:200});b.addEventListener("click",function(){NAVIBRIDGE.openNavi()});a.add(b);b=Ti.UI.createButton({top:50,title:"Install NaviBridge",height:40,
width:200});b.addEventListener("click",function(){NAVIBRIDGE.installNavi()});a.add(b);b=Ti.UI.createButton({top:95,title:"Insert POI",height:40,width:200});b.addEventListener("click",function(){NAVIBRIDGE.addPOI({lat:37.38922,lon:-122.048496})});a.add(b);b=Ti.UI.createButton({top:140,title:"Insert Multiple POIs",height:40,width:200});b.addEventListener("click",function(){NAVIBRIDGE.addPOIMultiple({lat:"37.38922",lon:"-122.048496",title:"Appc"},{lat:"37.38922",lon:"-122.048496",title:"Appc"},{lat:"37.38922",
lon:"-122.048496",title:"Appc"})});a.add(b);var d=Ti.UI.createLabel({top:200,left:5,right:5,height:160,backgroundColor:"white",color:"black",text:" ... waiting ...",font:{fontSize:12},verticalAlign:"top"});a.add(d);Ti.App.addEventListener("ti.navibridge.admin.console",function(a){var a='admin.console: "'+a.message+'"',b=d.text,b=b&&0<b.length?a+"\n"+b:a;d.text=b});return a};return a}();module.exports=NAVIBRIDGE;